<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur Plans Chargement CNESST</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1f2937;
            padding: 24px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
            color: white;
        }

        h1 {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            font-size: 20px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 14px;
        }

        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .generated-plan {
            display: none;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            margin-top: 20px;
        }

        .generated-plan.visible {
            display: block;
        }

        .plan-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .plan-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .plan-ref {
            font-size: 14px;
            opacity: 0.9;
            font-family: 'Courier New', monospace;
        }

        .plan-section {
            margin-bottom: 24px;
        }

        .plan-section h3 {
            font-size: 16px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e5e7eb;
        }

        .plan-content {
            font-size: 14px;
            line-height: 1.8;
        }

        .plan-list {
            list-style: none;
            padding-left: 0;
        }

        .plan-list li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }

        .plan-list li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: 700;
        }

        .step-list {
            counter-reset: step;
            list-style: none;
            padding-left: 0;
        }

        .step-list li {
            counter-increment: step;
            padding: 12px;
            margin-bottom: 8px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .step-list li::before {
            content: counter(step);
            display: inline-block;
            width: 28px;
            height: 28px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: 700;
            margin-right: 12px;
        }

        .diagram {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            text-align: center;
        }

        .diagram canvas {
            max-width: 100%;
            height: auto;
        }

        .compliance-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 16px;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            background: #10b981;
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .copy-button {
            margin-top: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .copy-button:hover {
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã G√âN√âRATEUR PLANS CHARGEMENT CNESST</h1>
            <div class="subtitle">Conforme Guide CNESST F√©vrier 2026 ‚Ä¢ Annexe 2-3 ‚Ä¢ ISO 45001</div>
        </div>

        <div class="main-grid">
            <!-- Form -->
            <div class="card">
                <h2>‚öôÔ∏è Param√®tres du Plan</h2>
                
                <div class="form-group">
                    <label for="cargo">Type de cargaison</label>
                    <select id="cargo">
                        <option value="bois">Paquets de bois (1000 kg)</option>
                        <option value="tuyaux">Tuyaux m√©talliques (500 kg)</option>
                        <option value="palettes">Palettes charg√©es (800 kg)</option>
                        <option value="acier">Poutres d'acier (1500 kg)</option>
                        <option value="conteneurs">Conteneurs (2000 kg)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="quantity">Quantit√© (unit√©s)</label>
                    <input type="number" id="quantity" value="6" min="1" max="20">
                </div>

                <div class="form-group">
                    <label for="equipment">√âquipement de manutention</label>
                    <select id="equipment">
                        <option value="chariot">Chariot √©l√©vateur</option>
                        <option value="chargeuse">Chargeuse sur roues</option>
                        <option value="grue">Grue mobile</option>
                        <option value="pince">Chariot √† pince</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="location">Lieu de chargement</label>
                    <select id="location">
                        <option value="cour">Cour d'usine</option>
                        <option value="entrepot">Entrep√¥t couvert</option>
                        <option value="chantier">Chantier de construction</option>
                        <option value="bordure">Bordure de route</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="personnel">Nom du personnel</label>
                    <input type="text" id="personnel" placeholder="Ex: Jean Tremblay">
                </div>

                <button onclick="generatePlan()">üöÄ G√©n√©rer le Plan CNESST</button>
            </div>

            <!-- Plan Generated -->
            <div class="card">
                <h2>üìÑ Plan G√©n√©r√©</h2>
                <div id="generatedPlan" class="generated-plan">
                    <!-- Plan will be inserted here -->
                </div>
                <div id="placeholder" style="text-align: center; padding: 60px 20px; color: #9ca3af;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üìã</div>
                    <div style="font-size: 16px;">Remplissez le formulaire et cliquez sur "G√©n√©rer"</div>
                    <div style="font-size: 14px; margin-top: 8px;">Le plan conforme CNESST appara√Ætra ici</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function generatePlan() {
            const cargo = document.getElementById('cargo').value;
            const quantity = document.getElementById('quantity').value;
            const equipment = document.getElementById('equipment').value;
            const location = document.getElementById('location').value;
            const personnel = document.getElementById('personnel').value || '√Ä compl√©ter';

            const cargoData = {
                bois: { name: 'Paquets de bois', weight: 1000, dim: '2.4m √ó 1.2m √ó 0.8m' },
                tuyaux: { name: 'Tuyaux m√©talliques', weight: 500, dim: '6m √ó 0.3m ‚åÄ' },
                palettes: { name: 'Palettes charg√©es', weight: 800, dim: '1.2m √ó 1.0m √ó 1.5m' },
                acier: { name: 'Poutres d\'acier', weight: 1500, dim: '12m √ó 0.4m √ó 0.3m' },
                conteneurs: { name: 'Conteneurs', weight: 2000, dim: '6m √ó 2.4m √ó 2.6m' }
            };

            const equipmentData = {
                chariot: { name: 'Chariot √©l√©vateur', capacity: '3000 kg' },
                chargeuse: { name: 'Chargeuse sur roues', capacity: '5000 kg' },
                grue: { name: 'Grue mobile', capacity: '10000 kg' },
                pince: { name: 'Chariot √† pince', capacity: '4000 kg' }
            };

            const locationData = {
                cour: 'Cour d\'usine - Surface asphalt√©e',
                entrepot: 'Entrep√¥t couvert - Plancher b√©ton',
                chantier: 'Chantier de construction - Zone d√©limit√©e',
                bordure: 'Bordure de route - Accotement stabilis√©'
            };

            const date = new Date().toLocaleDateString('fr-CA');
            const ref = 'PLAN-' + Date.now().toString().slice(-6);
            const totalWeight = cargoData[cargo].weight * quantity;
            const zonePerimeter = Math.ceil(quantity / 2) + 6;
            const cones = Math.ceil(zonePerimeter * 3.14 / 3);

            const plan = `
                <div class="plan-header">
                    <div class="plan-title">Plan de Chargement S√©curis√©</div>
                    <div class="plan-ref">R√©f√©rence: ${ref} ‚Ä¢ Date: ${date}</div>
                </div>

                <div class="plan-section">
                    <h3>1. Identification</h3>
                    <div class="plan-content">
                        <strong>Responsable:</strong> ${personnel}<br>
                        <strong>Date d'ex√©cution:</strong> ${date}<br>
                        <strong>R√©vision:</strong> v1.0
                    </div>
                </div>

                <div class="plan-section">
                    <h3>2. Cargaison</h3>
                    <div class="plan-content">
                        <strong>Type:</strong> ${cargoData[cargo].name}<br>
                        <strong>Quantit√©:</strong> ${quantity} unit√©s<br>
                        <strong>Poids unitaire:</strong> ${cargoData[cargo].weight} kg<br>
                        <strong>Poids total:</strong> ${totalWeight} kg<br>
                        <strong>Dimensions:</strong> ${cargoData[cargo].dim}
                    </div>
                </div>

                <div class="plan-section">
                    <h3>3. √âquipement & Personnel</h3>
                    <div class="plan-content">
                        <strong>Appareil:</strong> ${equipmentData[equipment].name}<br>
                        <strong>Capacit√©:</strong> ${equipmentData[equipment].capacity}<br>
                        <strong>Op√©rateur certifi√©:</strong> Oui (requis)<br>
                        <strong>Conducteur remorque:</strong> Formation requise
                    </div>
                </div>

                <div class="plan-section">
                    <h3>4. Lieu & Conditions</h3>
                    <div class="plan-content">
                        <strong>Emplacement:</strong> ${locationData[location]}<br>
                        <strong>Conditions m√©t√©o:</strong> V√©rifier avant man≈ìuvre<br>
                        <strong>Visibilit√©:</strong> Bonne luminosit√© requise
                    </div>
                </div>

                <div class="plan-section">
                    <h3>5. Zone d'Exclusion (Guide CNESST p.12)</h3>
                    <div class="plan-content">
                        <strong>P√©rim√®tre:</strong> ${zonePerimeter} m√®tres autour remorque<br>
                        <strong>D√©limitation:</strong> ${cones} c√¥nes oranges + ruban<br>
                        <strong>Zone d'attente:</strong> Minimum 15 m√®tres de la zone<br>
                        <strong>Acc√®s interdit:</strong> Sauf op√©rateur autoris√©
                    </div>
                </div>

                <div class="plan-section">
                    <h3>6. Communication (CNESST p.17)</h3>
                    <ul class="plan-list">
                        <li>Formation conducteur (10 min): proc√©dures, signaux, risques</li>
                        <li>Radio VHF canal 5 (op√©rateur ‚Üî superviseur)</li>
                        <li>Signal sonore: 3 bips courts = d√©but man≈ìuvre</li>
                    </ul>
                </div>

                <div class="plan-section">
                    <h3>7. √âtapes S√©quentielles (Annexe 2)</h3>
                    <ol class="step-list">
                        <li><strong>Superviseur:</strong> V√©rifier conditions m√©t√©o et sol</li>
                        <li><strong>Superviseur:</strong> Installer c√¥nes et zone d'exclusion</li>
                        <li><strong>Op√©rateur:</strong> Inspecter √©quipement (checklist)</li>
                        <li><strong>Conducteur:</strong> Positionner remorque, frein de stationnement</li>
                        <li><strong>Superviseur:</strong> Confirmer zone d√©gag√©e (radio)</li>
                        <li><strong>Op√©rateur:</strong> Signal 3 bips, d√©buter chargement</li>
                        <li><strong>Op√©rateur:</strong> Charger ${quantity} unit√©s (ordre stable)</li>
                        <li><strong>Op√©rateur:</strong> Signal fin man≈ìuvre, retrait zone</li>
                    </ol>
                </div>

                <div class="plan-section">
                    <h3>8. Dispositifs Arrimage (CNESST p.23)</h3>
                    <ul class="plan-list">
                        <li>Sangles d'arrimage: ${Math.ceil(quantity / 2)} √ó 5000 kg</li>
                        <li>Supports anti-d√©rapants sous cargaison</li>
                        <li>Veste haute visibilit√© classe 2 (op√©rateur)</li>
                        ${location === 'chantier' ? '<li>Casque de s√©curit√© CSA Z94.1</li>' : ''}
                    </ul>
                </div>

                <div class="plan-section">
                    <h3>9. Conformit√© R√©glementaire</h3>
                    <div class="compliance-badges">
                        <span class="badge">‚úì CNESST Guide 2026</span>
                        <span class="badge">‚úì ISO 45001</span>
                        <span class="badge">‚úì RSST Art.324</span>
                        <span class="badge">‚úì Loi 25</span>
                    </div>
                </div>

                <div class="diagram">
                    <canvas id="diagramCanvas" width="400" height="300"></canvas>
                </div>

                <button class="copy-button" onclick="copyPlan()">üìã Copier le Plan</button>
            `;

            document.getElementById('generatedPlan').innerHTML = plan;
            document.getElementById('generatedPlan').classList.add('visible');
            document.getElementById('placeholder').style.display = 'none';

            // Draw diagram
            setTimeout(() => {
                const canvas = document.getElementById('diagramCanvas');
                const ctx = canvas.getContext('2d');
                
                // Background
                ctx.fillStyle = '#f9fafb';
                ctx.fillRect(0, 0, 400, 300);

                // Truck
                ctx.fillStyle = '#667eea';
                ctx.fillRect(150, 120, 100, 60);
                ctx.fillStyle = 'white';
                ctx.font = '12px sans-serif';
                ctx.fillText('REMORQUE', 165, 155);

                // Exclusion zone
                ctx.strokeStyle = '#ef4444';
                ctx.lineWidth = 3;
                ctx.setLineDash([10, 5]);
                ctx.beginPath();
                ctx.arc(200, 150, 80, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]);

                // Cones
                for (let i = 0; i < 8; i++) {
                    const angle = (Math.PI * 2 / 8) * i;
                    const x = 200 + Math.cos(angle) * 80;
                    const y = 150 + Math.sin(angle) * 80;
                    
                    ctx.fillStyle = '#f97316';
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Cargo
                const cargoCount = Math.min(parseInt(quantity), 6);
                ctx.fillStyle = '#10b981';
                for (let i = 0; i < cargoCount; i++) {
                    const x = 160 + (i % 3) * 25;
                    const y = 130 + Math.floor(i / 3) * 25;
                    ctx.fillRect(x, y, 20, 20);
                }

                // Labels
                ctx.fillStyle = '#374151';
                ctx.font = 'bold 14px sans-serif';
                ctx.fillText('Zone d\'exclusion', 220, 100);
                ctx.font = '12px sans-serif';
                ctx.fillText(zonePerimeter + 'm p√©rim√®tre', 225, 120);
            }, 100);
        }

        function copyPlan() {
            const planText = document.getElementById('generatedPlan').innerText;
            navigator.clipboard.writeText(planText).then(() => {
                const btn = event.target;
                btn.textContent = '‚úì Plan copi√© !';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = 'üìã Copier le Plan';
                    btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                }, 2000);
            });
        }
    </script>
</body>
</html>
